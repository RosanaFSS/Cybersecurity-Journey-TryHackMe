<p align="center">November 9, 2024</p>
<p align="center">Hey there, fellow lifelong learner! I´m <a href="https://www.linkedin.com/in/rosanafssantos/">Rosana</a>, and I’m genuinely excited to join you on this adventure.<br>
It´s part of my $$\textcolor{#FF69B4}{\textbf{187}}$$-day-streak in  <a href="https://tryhackme.com/r/hacktivities">TryHackMe</a>.</p>

<h1 align="center">
  $$\textcolor{#3bd62d}{\textnormal{ Skynet }}$$
</h1>
<p align="center">A vulnerable Terminator themed Linux machine.</p>
<p align="center">Access this TryHackMe Room clicking <a href="https://tryhackme.com/r/room/skynet">Skynet</a>.</p><br>
<p align="center">
  <img height="150px" hspace="20" src="https://github.com/user-attachments/assets/af537775-bab8-42f2-80b6-b921a06df4be">
  <img height="150px" src="https://github.com/user-attachments/assets/f6aacb6c-32c6-4620-b195-c4ca3ab4a626">
</p>

<p align="center">Summary</p>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [Deploy and compromise the vulnerable machine!](#1) &nbsp;&nbsp;&nbsp;&nbsp;▪️&nbsp;&nbsp;&nbsp;&nbsp; [Room Complete](#2) &nbsp;&nbsp;&nbsp;&nbsp;▪️&nbsp;&nbsp;&nbsp;&nbsp; [My Journey](#3) </p>

<br>
<br>
<br>
<h2>Task 1. Deploy and compromise the vulnerable machine<a id='1'></a></h2>
<br>

<p align="center">
  <img width="750px" src="https://github.com/user-attachments/assets/f2c86c61-b24c-44be-a9e1-2eab25546076">
</p>


<p>You can follow our official walkthrough for this challenge on our <a href="https://tryhackme.com/r/resources/blog/skynet-writeup">blog</a>.</p>

<br>
<br>

<h3 align="left"> $$\textcolor{#f00c17}{\textnormal{Answer the questions below}}$$ </h3>
<br>

> 1.1. <em>What is Miles password for his emails?</em><br><a id='1.1'></a>
>> <code><strong>cyborg007haloterminator</strong></code>

<br>

<pre><code>root@[Attack_Box]/skynet:~#nano /etc/hosts
...
</code></pre>

<br>

<h3>Used Nmap to scan ports</h3>
<br>
<p>Ports 22/SSH, 80/HTTP, 110/SMB, 139/IMAP, 143/POP3 and 445/NetBIOS are open.</p>
<br>

<pre><code>root@[Attack_Box]/skynet:~# nmap -sC -sV -A skynet.thm

Starting Nmap 7.60 ( https://nmap.org ) at 2024-11-10 01:37 GMT
Nmap scan report for skynet.thm ([Target])
Host is up (0.00059s latency).
Not shown: 994 closed ports
PORT    STATE SERVICE     VERSION
22/tcp  open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
...
80/tcp  open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Skynet
110/tcp open  pop3        Dovecot pop3d
|_pop3-capabilities: TOP PIPELINING CAPA RESP-CODES UIDL AUTH-RESP-CODE SASL
139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
143/tcp open  imap        Dovecot imapd
|_imap-capabilities: Pre-login LOGIN-REFERRALS LITERAL+ have IMAP4rev1 IDLE post-login capabilities listed ID more OK LOGINDISABLEDA0001 ENABLE SASL-IR
445/tcp open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
...
Running: Linux 3.X
OS CPE: cpe:/o:linux:linux_kernel:3.13
OS details: Linux 3.13
Network Distance: 1 hop
Service Info: Host: SKYNET; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_nbstat: NetBIOS name: SKYNET, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: skynet
|   NetBIOS computer name: SKYNET\x00
|   Domain name: \x00
|   FQDN: skynet
|_  System time: 2024-11-09T19:38:15-06:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2024-11-10 01:38:15
|_  start_date: 1600-12-31 23:58:45

TRACEROUTE
HOP RTT     ADDRESS
1   0.59 ms skynet.thm (10.10.217.249)

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 15.55 seconds
</code></pre>

<h3>Used Gobuster to enumerate directories</h3>
<br>
<p>By checking the directories, Gobuster indicated <code>/admin</code>, <code>/css</code>, <code>/js</code>, <code>/config</code>, <code>ai</code> and <code>/squirrelmail</code>.</p>
<br>

<pre><code>root@[Attack_Box]/skynet:~# gobuster dir -u http://skynet.thm -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
===============================================================
Gobuster v3.6
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://skynet.thm
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.6
[+] Timeout:                 10s
===============================================================
Starting gobuster in directory enumeration mode
===============================================================
/admin                (Status: 301) [Size: 308] [--> http://skynet.thm/admin/]
/css                  (Status: 301) [Size: 306] [--> http://skynet.thm/css/]
/js                   (Status: 301) [Size: 305] [--> http://skynet.thm/js/]
/config               (Status: 301) [Size: 309] [--> http://skynet.thm/config/]
/ai                   (Status: 301) [Size: 305] [--> http://skynet.thm/ai/]
/squirrelmail         (Status: 301) [Size: 315] [--> http://skynet.thm/squirrelmail/]
/server-status        (Status: 403) [Size: 275]
Progress: 220560 / 220561 (100.00%)
===============================================================
Finished
===============================================================
</code></pre>

<br>
<h3>Used smbclient</h3>
<br>

<p><code>SMB</code> is a is a network file sharing protocol that is used to share files and peripherals between computers on a network. The SMB server can sometimes allow <code>anonymous access</code>. An anonymous access allows a user to connect to a share without providing any password. </p>

<br>

<p>Let´s used <code>smbclient</code>code> to check if we have <code>anonymous access</code>.</p>

<br>

<pre><code>root@[Attack_Box]/skynet:~# smbclient -L \\skynet.thm
WARNING: The "syslog" option is deprecated
Enter WORKGROUP\root's password: 

	Sharename       Type      Comment
	---------       ----      -------
	print$          Disk      Printer Drivers
	anonymous       Disk      Skynet Anonymous Share
	milesdyson      Disk      Miles Dyson Personal Share
	IPC$            IPC       IPC Service (skynet server (Samba, Ubuntu))
Reconnecting with SMB1 for workgroup listing.

	Server               Comment
	---------            -------

	Workgroup            Master
	---------            -------
	WORKGROUP            SKYNET
</code></pre>

<br>

<pre><code>root@[Attack_Box]/skynet:~# smbclient \\\\skynet.thm\\anonymous
WARNING: The "syslog" option is deprecated
Enter WORKGROUP\root's password: 
Try "help" to get a list of possible commands.
smb: \> dir
  .                                   D        0  Thu Nov 26 16:04:00 2020
  ..                                  D        0  Tue Sep 17 08:20:17 2019
  attention.txt                       N      163  Wed Sep 18 04:04:59 2019
  logs                                D        0  Wed Sep 18 05:42:16 2019

		9204224 blocks of size 1024. 5810392 blocks available
smb: \> get attention.txt
getting file \attention.txt of size 163 as attention.txt (53.1 KiloBytes/sec) (average 53.1 KiloBytes/sec)
smb: \> exit
</code></pre>

<br>

<pre><code>root@[Attack_Box]/skynet:~# enum4linux skynet.thm
WARNING: polenum.py is not in your path.  Check that package is installed and your PATH is sane.
Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Sun Nov 10 02:10:44 2024

 ========================== 
|    Target Information    |
 ========================== 
Target ........... skynet.thm
RID Range ........ 500-550,1000-1050
Username ......... ''
Password ......... ''
Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none


 ================================================== 
|    Enumerating Workgroup/Domain on skynet.thm    |
 ================================================== 
[+] Got domain/workgroup name: WORKGROUP

 ========================================== 
|    Nbtstat Information for skynet.thm    |
 ========================================== 
Looking up status of 10.10.217.249
	SKYNET          <00> -         B <ACTIVE>  Workstation Service
	SKYNET          <03> -         B <ACTIVE>  Messenger Service
	SKYNET          <20> -         B <ACTIVE>  File Server Service
	..__MSBROWSE__. <01> - <GROUP> B <ACTIVE>  Master Browser
	WORKGROUP       <00> - <GROUP> B <ACTIVE>  Domain/Workgroup Name
	WORKGROUP       <1d> -         B <ACTIVE>  Master Browser
	WORKGROUP       <1e> - <GROUP> B <ACTIVE>  Browser Service Elections

	MAC Address = 00-00-00-00-00-00

 =================================== 
|    Session Check on skynet.thm    |
 =================================== 
[+] Server skynet.thm allows sessions using username '', password ''

 ========================================= 
|    Getting domain SID for skynet.thm    |
 ========================================= 
Domain Name: WORKGROUP
Domain Sid: (NULL SID)
[+] Can't determine if host is part of domain or part of a workgroup

     ==================================== 
|    OS information on skynet.thm    |
 ==================================== 
Use of uninitialized value $os_info in concatenation (.) or string at /root/Desktop/Tools/Miscellaneous/enum4linux.pl line 464.
[+] Got OS info for skynet.thm from smbclient: 
[+] Got OS info for skynet.thm from srvinfo:
	SKYNET         Wk Sv PrQ Unx NT SNT skynet server (Samba, Ubuntu)
	platform_id     :	500
	os version      :	6.1
	server type     :	0x809a03

 =========================== 
|    Users on skynet.thm    |
 =========================== 
index: 0x1 RID: 0x3e8 acb: 0x00000010 Account: milesdyson	Name: 	Desc: 

user:[milesdyson] rid:[0x3e8]

 ======================================= 
|    Share Enumeration on skynet.thm    |
 ======================================= 
WARNING: The "syslog" option is deprecated

	Sharename       Type      Comment
	---------       ----      -------
	print$          Disk      Printer Drivers
	anonymous       Disk      Skynet Anonymous Share
	milesdyson      Disk      Miles Dyson Personal Share
	IPC$            IPC       IPC Service (skynet server (Samba, Ubuntu))
Reconnecting with SMB1 for workgroup listing.
    
	Server               Comment
	---------            -------

	Workgroup            Master
	---------            -------
	WORKGROUP            SKYNET

[+] Attempting to map shares on skynet.thm
//skynet.thm/print$	Mapping: DENIED, Listing: N/A
//skynet.thm/anonymous	Mapping: OK, Listing: OK
//skynet.thm/milesdyson	Mapping: DENIED, Listing: N/A
//skynet.thm/IPC$	[E] Can't understand response:
WARNING: The "syslog" option is deprecated
NT_STATUS_OBJECT_NAME_NOT_FOUND listing \*

 ================================================== 
|    Password Policy Information for skynet.thm    |
 ================================================== 
[E] Dependent program "polenum.py" not present.  Skipping this check.  Download polenum from http://labs.portcullis.co.uk/application/polenum/


 ============================ 
|    Groups on skynet.thm    |
 ============================ 

[+] Getting builtin groups:

[+] Getting builtin group memberships:

[+] Getting local groups:

[+] Getting local group memberships:

[+] Getting domain groups:

[+] Getting domain group memberships:

 ===================================================================== 
|    Users on skynet.thm via RID cycling (RIDS: 500-550,1000-1050)    |
 ===================================================================== 
...
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''
S-1-22-1-1001 Unix User\milesdyson (Local User)

 =========================================== 
|    Getting printer info for skynet.thm    |
 =========================================== 
No printers returned.


enum4linux complete on Sun Nov 10 02:11:00 2024
</code></pre>


<pre><code>root@[Attack_Box]/skynet:~# cat attention.txt
A recent system malfunction has caused various passwords to be changed. All skynet employees are required to change their password after seeing this.
-Miles Dyson
</code></pre>

<br>

<pre><code>root@[Attack_Box]/skynet:~# smbclient \\\\skynet.thm\\anonymous
WARNING: The "syslog" option is deprecated
Enter WORKGROUP\root's password: 
Try "help" to get a list of possible commands.
smb: \> cd logs
smb: \logs\> ls
  .                                   D        0  Wed Sep 18 05:42:16 2019
  ..                                  D        0  Thu Nov 26 16:04:00 2020
  log2.txt                            N        0  Wed Sep 18 05:42:13 2019
  log1.txt                            N      471  Wed Sep 18 05:41:59 2019
  log3.txt                            N        0  Wed Sep 18 05:42:16 2019

		9204224 blocks of size 1024. 5810392 blocks available
smb: \logs\> get log1.txt
getting file \logs\log1.txt of size 471 as log1.txt (230.0 KiloBytes/sec) (average 230.0 KiloBytes/sec)
smb: \logs\> get log2.txt
getting file \logs\log2.txt of size 0 as log2.txt (0.0 KiloBytes/sec) (average 153.3 KiloBytes/sec)
smb: \logs\> get log3.txt
getting file \logs\log3.txt of size 0 as log3.txt (0.0 KiloBytes/sec) (average 115.0 KiloBytes/sec)
smb: \logs\> exit
</code></pre>

<br>

<pre><code>root@[Attack_Box]/skynet:~# cat log1.txt
cyborg007haloterminator
terminator22596
...
determinator
cyborg007haloterminator
avsterminator
alonsoterminator
Walterminator
79terminator6
1996terminator
</code></pre>

<br>
<p>Logs 2 and 3 are empty.</p>

<pre><code>root@[Attack_Box]/skynet:~# cat log2.txt
cat log3.txt
</code></pre>

<br>

> 1.2. <em>What is the hidden directory?</em><br><a id='1.2'></a>
>> <code><strong>/45kra24zxs28v3yd</strong></code>

<br>
<h3>Visualized web pages</h3>

![image](https://github.com/user-attachments/assets/244bbf1e-2f8b-4729-b5de-5a84d8d53cd1)

<br>

<p>For <code>/admin</code>, <code>/css</code>, <code>/js</code>, <code>/config</code> and <code>ai</code> I received the message <code>Forbidden</code>.  And for <code>/squirrelmail</code> I got the following ...</p>

![image](https://github.com/user-attachments/assets/4b68f403-70c9-4e6b-b112-5780ea525c4f)

<br>







<br>
<h3>Used Hydra to find a password for milesdyson</h3>

<pre><code>root@[Attack_Box]/skynet:~#
</code></pre>

<br>




> 1.3. <em>What is the vulnerability called when you can include a remote file for malicious purposes?</em><br><a id='1.3'></a>
>> <code><strong>remote file inclusion </strong></code>

<br>

> 1.4. <em>What is the user flag?</em><br><a id='1.4'></a>
>> <code><strong>___</strong></code>

<br>

> 1.5. <em>What is the root flag?</em><br><a id='1.5'></a>
>> <code><strong>____</strong></code>


<br>

